/******************************************************************
Site Name: Portal
Author: Carl Bennett <carlbennettnz@gmail.com>

Stylesheet: Dashboard modules
******************************************************************/

.dashboard {
  margin: $gutter 0;

  .module.floating {
    position: absolute;
    top: 3* (-$gutter);
    right: $gutter;
    @include transform-origin(right top);
    @include animation(module-appear 0.3s cubic-bezier(0.175, 0.885, 0.320, 1.275));
  }

  section.dashboard-row {
    display: flex;
    padding: 0;
    margin-bottom: $gutter;

    &:last-of-type {
      border-bottom: none;
      margin-bottom: 0;
    }
  }

  .module {
    $module-height: 200px;

    flex: 1 0;
    margin: 0 $gutter 0 0;
    min-height: $module-height;
    overflow: hidden;

    &:last-child {
      margin-right: 0;
    }

    > header {
      padding: 0.5em 1em;
      margin-bottom: $gutter;
      cursor: -webkit-grab;
      cursor: -moz-grab;
      cursor: grab;
      position: relative;

      h1 {
        font-size: 16px;
        text-transform: uppercase;
        letter-spacing: 1px;
        text-align: center;
        float: none;
        color: tint($copy-color, 20%);

        &.placeholder {
          color: tint($subdued, 30%);
        }
      }

      .options {
        float: right;
        color: $subdued;
        cursor: pointer;
        font-size: 125%;
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        padding: 0.5em;

        &:hover {
          text-shadow: none;
          color: shade($subdued, 20%);
        }

        &:focus,
        &:active {
          outline: none;
        }

        &:active {
          color: shade($subdued, 30%);
        }
      }
    }

    > table {
      margin-top: -($gutter + 1px);
    }

    .error {
      color: tint($subdued, 20%);

      h2 {
        color: tint($subdued, 30%);
      }

      h3 {
        color: tint($subdued, 30%);
        font-weight: normal;
      }

      p {
        font-style: italic;
      }
    }

    &.ui-sortable-helper header {
      cursor: -webkit-grabbing;
      cursor: -moz-grabbing;
      cursor: grabbing;
    }
  }

  .sortable-ghost {
    border: 1px dashed $border-color;
    background: transparent;

    * {
      display: none;
    }
  }
}

.dashboard-module-config {
  height: 600px;
  max-height: calc(100vh - #{$gutter} * 2);
}

.dashboard-module-config-steps {
  white-space: nowrap;
  overflow: hidden;
  height: 100%;
  max-height: calc(100% - 110px);
  overflow-y: auto;
  margin: (-$gutter);
  padding: $gutter;

  > section {
    width: 500px;
    white-space: normal;
    overflow-y: auto;
    pointer-events: none;
    display: none;
    @include transition(all 300ms cubic-bezier(0.165, 0.840, 0.440, 1.000));

    &.active {
      opacity: 1;
      display: block;
      pointer-events: all;
    }

    section {
      border-bottom: 1px solid $border-color;
      padding-bottom: $gutter;

      &:last-of-type {
        border-bottom: 0;
        margin-bottom: 0;
        padding-bottom: 0;
      }
    }
  }

  label, input[type=text] {
    float: none;
    width: auto;
    clear: none;
    display: block;
  }
  label {
    font-weight: bold;
  }

  .row {
    > div {
      @include span-columns(6);
    }
  }

  .tree-branch {
    i {
      color: $subdued;
      width: 1em;
    }

    &:hover {
      text-decoration: none;

      i {
        color: inherit;
      }
    }
  }
}

.selector label .subtext {
  color: tint($copy-color, 50%);
  margin-left: 2em;
}
